webpackJsonp([0],{779:function(n,l,u){"use strict";function e(n){return r._22(0,[(n()(),r.Z(0,0,null,null,4,"div",[["class","progress-outer"]],null,null,null,null,null)),(n()(),r._20(-1,null,["\n  "])),(n()(),r.Z(2,0,null,null,1,"div",[["class","progress-inner"]],[[4,"width",null]],null,null,null,null)),(n()(),r._20(3,null,["\n    ","%\n  "])),(n()(),r._20(-1,null,["\n"]))],null,function(n,l){var u=l.component;n(l,2,0,u.progress+"%");n(l,3,0,u.progress)})}function t(n){return r._22(0,[(n()(),r.Z(0,0,null,null,1,"progress-bar",[],null,null,null,e,P)),r.Y(1,49152,null,0,U.a,[],{progress:[0,"progress"]},null)],function(n,l){n(l,1,0,l.component.uploadProgress)},null)}function a(n){return r._22(0,[(n()(),r.Z(0,0,null,null,67,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,u){var e=!0,t=n.component;if("submit"===l){e=!1!==r._13(n,2).onSubmit(u)&&e}if("reset"===l){e=!1!==r._13(n,2).onReset()&&e}if("ngSubmit"===l){e=!1!==t.onSubmit(u)&&e}return e},null,null)),r.Y(1,16384,null,0,Z.s,[],null,null),r.Y(2,4210688,[["profileForm",4]],0,Z.m,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r._17(2048,null,Z.b,null,[Z.m]),r.Y(4,16384,null,0,Z.l,[Z.b],null,null),(n()(),r._20(-1,null,["\n\n    "])),(n()(),r.Z(6,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,j.b,j.a)),r.Y(7,1097728,null,3,k.a,[S.a,z.a,r.j,r.z,[2,q.a]],null,null),r._18(335544320,1,{contentLabel:0}),r._18(603979776,2,{_buttons:1}),r._18(603979776,3,{_icons:1}),r.Y(11,16384,null,0,I.a,[],null,null),(n()(),r._20(-1,2,["\n      "])),(n()(),r.Z(13,0,null,4,1,"ion-icon",[["item-end",""],["name","person"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(14,147456,[[3,4]],0,M.a,[z.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._20(-1,2,["\n      "])),(n()(),r.Z(16,0,null,3,7,"ion-input",[["min-length","3"],["name","name"],["placeholder","Name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,u){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.currentUser.name=u)&&e}return e},E.b,E.a)),r.Y(17,16384,null,0,Z.p,[],{required:[0,"required"]},null),r._17(1024,null,Z.h,function(n){return[n]},[Z.p]),r.Y(19,671744,null,0,Z.n,[[2,Z.b],[2,Z.h],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._17(2048,null,Z.j,null,[Z.n]),r.Y(21,16384,null,0,Z.k,[Z.j],null,null),r.Y(22,5423104,null,0,V.a,[z.a,w.a,S.a,D.a,r.j,r.z,[2,L.a],[2,k.a],[2,Z.j],x.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),r._20(-1,null,["\n      "])),(n()(),r._20(-1,2,["\n    "])),(n()(),r._20(-1,null,["\n\n    "])),(n()(),r.Z(26,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,j.b,j.a)),r.Y(27,1097728,null,3,k.a,[S.a,z.a,r.j,r.z,[2,q.a]],null,null),r._18(335544320,4,{contentLabel:0}),r._18(603979776,5,{_buttons:1}),r._18(603979776,6,{_icons:1}),r.Y(31,16384,null,0,I.a,[],null,null),(n()(),r._20(-1,2,["\n      "])),(n()(),r.Z(33,0,null,4,1,"ion-icon",[["item-end",""],["name","at"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(34,147456,[[6,4]],0,M.a,[z.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._20(-1,2,["\n      "])),(n()(),r.Z(36,0,null,3,7,"ion-input",[["min-length","3"],["name","username"],["placeholder","Username"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,u){var e=!0;if("ngModelChange"===l){e=!1!==(n.component.currentUser.username=u)&&e}return e},E.b,E.a)),r.Y(37,16384,null,0,Z.p,[],{required:[0,"required"]},null),r._17(1024,null,Z.h,function(n){return[n]},[Z.p]),r.Y(39,671744,null,0,Z.n,[[2,Z.b],[2,Z.h],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._17(2048,null,Z.j,null,[Z.n]),r.Y(41,16384,null,0,Z.k,[Z.j],null,null),r.Y(42,5423104,null,0,V.a,[z.a,w.a,S.a,D.a,r.j,r.z,[2,L.a],[2,k.a],[2,Z.j],x.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),r._20(-1,null,["\n      "])),(n()(),r._20(-1,2,["\n    "])),(n()(),r._20(-1,null,["\n\n    "])),(n()(),r.Z(46,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,j.b,j.a)),r.Y(47,1097728,null,3,k.a,[S.a,z.a,r.j,r.z,[2,q.a]],null,null),r._18(335544320,7,{contentLabel:0}),r._18(603979776,8,{_buttons:1}),r._18(603979776,9,{_icons:1}),r.Y(51,16384,null,0,I.a,[],null,null),(n()(),r._20(-1,2,["\n      "])),(n()(),r.Z(53,0,null,4,1,"ion-icon",[["item-end",""],["name","image"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(54,147456,[[9,4]],0,M.a,[z.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._20(-1,2,["\n      "])),(n()(),r.Z(56,0,null,2,0,"input",[["accept","image/*"],["type","file"]],null,[[null,"change"]],function(n,l,u){var e=!0;if("change"===l){e=!1!==n.component.onPhoto(u)&&e}return e},null,null)),(n()(),r._20(-1,2,["\n    "])),(n()(),r._20(-1,null,["\n\n    "])),(n()(),r.U(16777216,null,null,1,null,t)),r.Y(60,16384,null,0,F.k,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r._20(-1,null,["\n\n    "])),(n()(),r.Z(62,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),r._20(-1,null,["\n    "])),(n()(),r.Z(64,0,null,null,2,"button",[["block",""],["ion-button",""],["type","submit"]],[[8,"disabled",0]],null,null,T.b,T.a)),r.Y(65,1097728,null,0,N.a,[[8,""],z.a,r.j,r.z],{block:[0,"block"]},null),(n()(),r._20(-1,0,["Save"])),(n()(),r._20(-1,null,["\n\n  "]))],function(n,l){var u=l.component;n(l,14,0,"person");n(l,17,0,"");n(l,19,0,"name",u.currentUser.name);n(l,22,0,"text","Name");n(l,34,0,"at");n(l,37,0,"");n(l,39,0,"username",u.currentUser.username);n(l,42,0,"text","Username");n(l,54,0,"image");n(l,60,0,u.uploadProgress);n(l,65,0,"")},function(n,l){n(l,0,0,r._13(l,4).ngClassUntouched,r._13(l,4).ngClassTouched,r._13(l,4).ngClassPristine,r._13(l,4).ngClassDirty,r._13(l,4).ngClassValid,r._13(l,4).ngClassInvalid,r._13(l,4).ngClassPending);n(l,13,0,r._13(l,14)._hidden);n(l,16,0,r._13(l,17).required?"":null,r._13(l,21).ngClassUntouched,r._13(l,21).ngClassTouched,r._13(l,21).ngClassPristine,r._13(l,21).ngClassDirty,r._13(l,21).ngClassValid,r._13(l,21).ngClassInvalid,r._13(l,21).ngClassPending);n(l,33,0,r._13(l,34)._hidden);n(l,36,0,r._13(l,37).required?"":null,r._13(l,41).ngClassUntouched,r._13(l,41).ngClassTouched,r._13(l,41).ngClassPristine,r._13(l,41).ngClassDirty,r._13(l,41).ngClassValid,r._13(l,41).ngClassInvalid,r._13(l,41).ngClassPending);n(l,53,0,r._13(l,54)._hidden);n(l,64,0,r._13(l,2).form.invalid)})}function i(n){return r._22(0,[(n()(),r.Z(0,0,null,null,5,"ion-header",[],null,null,null,null,null)),r.Y(1,16384,null,0,R.a,[z.a,r.j,r.z,[2,O.a]],null,null),(n()(),r._20(-1,null,["\n\n  "])),(n()(),r.Z(3,0,null,null,1,"custom-logged-header",[],null,null,null,X.b,X.a)),r.Y(4,114688,null,0,B.a,[J.a,o.a,D.a,K.a],{title:[0,"title"]},null),(n()(),r._20(-1,null,["\n\n"])),(n()(),r._20(-1,null,["\n\n\n"])),(n()(),r.Z(7,0,null,null,12,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,W.b,W.a)),r.Y(8,4374528,null,0,L.a,[z.a,w.a,x.a,r.j,r.z,D.a,$.a,r.u,[2,O.a],[2,A.a]],null,null),(n()(),r._20(-1,1,["\n\n  "])),(n()(),r.Z(10,0,null,1,1,"user-info",[],null,null,null,G.b,G.a)),r.Y(11,49152,null,0,H.a,[],{user:[0,"user"]},null),(n()(),r._20(-1,1,["\n\n  "])),(n()(),r.Z(13,0,null,1,2,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var e=!0,t=n.component;if("click"===l){e=!1!=(t.canEdit=!t.canEdit)&&e}return e},T.b,T.a)),r.Y(14,1097728,null,0,N.a,[[8,""],z.a,r.j,r.z],{block:[0,"block"]},null),(n()(),r._20(-1,0,["Edit"])),(n()(),r._20(-1,1,["\n\n  "])),(n()(),r.U(16777216,null,1,1,null,a)),r.Y(18,16384,null,0,F.k,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r._20(-1,1,["\n\n"])),(n()(),r._20(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,4,0,"User Profile");n(l,11,0,u.currentUser);n(l,14,0,"");n(l,18,0,u.canEdit)},function(n,l){n(l,7,0,r._13(l,8).statusbarPadding,r._13(l,8)._hasRefresher)})}Object.defineProperty(l,"__esModule",{value:!0});var r=u(0),o=(u(2),u(60),u(37)),s=u(67),c=function(){function n(n,l,u,e){this.navCtrl=n,this.navParams=l,this.authService=u,this.userService=e,this.canEdit=!1}return n.prototype.ionViewCanEnter=function(){return this.authService.authenticated},n.prototype.ionViewDidLoad=function(){var n=this;console.log("profile loaded"),this.userService.mapObjectKey(this.userService.currentUser).first().subscribe(function(l){n.currentUser=l})},n.prototype.onSubmit=function(n){var l=this;if(n.preventDefault(),this.filePhoto){var u=this.userService.uploadPhoto(this.filePhoto,this.currentUser.$key);u.on("state_changed",function(n){l.uploadProgress=Math.round(n.bytesTransferred/n.totalBytes*100)},function(n){},function(){l.editUser(u.snapshot.downloadURL)})}else this.editUser()},n.prototype.onPhoto=function(n){this.filePhoto=n.target.files[0]},n.prototype.editUser=function(n){var l=this;this.userService.edit({name:this.currentUser.name,username:this.currentUser.username,photo:n||this.currentUser.photo||""}).then(function(){l.canEdit=!1,l.filePhoto=void 0,l.uploadProgress=0})},n}(),d=u(220),_=u(221),g=function(){return function(){}}(),m=u(426),h=u(427),p=u(428),f=u(429),b=u(430),v=u(431),Y=u(432),C=u(433),y=u(434),U=u(437),P=r.X({encapsulation:2,styles:[],data:{}}),Z=u(22),j=u(72),k=u(23),S=u(21),z=u(4),q=u(46),I=u(61),M=u(40),E=u(435),V=u(98),w=u(7),D=u(11),L=u(32),x=u(14),F=u(18),T=u(41),N=u(25),R=u(99),O=u(8),X=u(438),B=u(147),J=u(49),K=u(35),W=u(146),$=u(38),A=u(27),G=u(442),H=u(149),Q=u(19),nn=r.X({encapsulation:2,styles:[],data:{}}),ln=r.V("page-user-profile",c,function(n){return r._22(0,[(n()(),r.Z(0,0,null,null,1,"page-user-profile",[],null,null,null,i,nn)),r.Y(1,49152,null,0,c,[A.a,Q.a,o.a,s.a],null,null)],null,null)},{},{},[]),un=u(222),en=u(68);u.d(l,"UserProfilePageModuleNgFactory",function(){return tn});var tn=r.W(g,[],function(n){return r._10([r._11(512,r.i,r.S,[[8,[m.a,h.a,p.a,f.a,b.a,v.a,Y.a,C.a,y.a,ln]],[3,r.i],r.s]),r._11(4608,F.m,F.l,[r.r,[2,F.u]]),r._11(4608,Z.t,Z.t,[]),r._11(4608,Z.d,Z.d,[]),r._11(512,F.c,F.c,[]),r._11(512,Z.r,Z.r,[]),r._11(512,Z.g,Z.g,[]),r._11(512,Z.o,Z.o,[]),r._11(512,un.a,un.a,[]),r._11(512,un.b,un.b,[]),r._11(512,d.a,d.a,[]),r._11(512,_.a,_.a,[]),r._11(512,g,g,[]),r._11(256,en.a,c,[])])})}});